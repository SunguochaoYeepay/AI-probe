# 智能图表生成系统

基于Vue 3 + Ant Design Vue + ECharts的智能数据可视化系统，支持自然语言需求描述自动生成图表。

## 🚀 功能特性

### 核心功能
- **智能需求理解**：支持自然语言描述分析需求
- **自动图表生成**：根据需求自动选择最合适的图表类型
- **核心指标分析**：转化率、错误率、耗时分析等
- **API配置管理**：自动配置管理，无需手动设置
- **项目配置管理**：支持团队、项目、点位的统一管理
- **动态点位加载**：自动获取和管理埋点配置

### 支持的图表类型
- 漏斗图：转化流程分析
- 折线图：趋势变化分析
- 柱状图：数据对比分析
- 饼图：数据分布分析
- 数值卡片：总体概览
- 堆叠柱状图：成功失败对比

## 🛠️ 技术栈

- **前端框架**：Vue 3
- **UI组件库**：Ant Design Vue 4.0
- **图表库**：ECharts 5.4
- **构建工具**：Vite
- **状态管理**：Vuex
- **HTTP客户端**：Axios

## 📦 安装和运行

### 环境要求
- Node.js >= 16.0.0
- npm >= 8.0.0

### 安装依赖
```bash
npm install
```

### 开发环境运行
```bash
npm run dev
```

### 生产环境构建
```bash
npm run build
```

### 预览构建结果
```bash
npm run preview
```

## 🎯 使用指南

### 1. 系统初始化
系统启动后会自动：
- 加载API配置
- 验证数据源连接
- 初始化图表生成器

### 2. 描述分析需求
在需求描述框中输入自然语言，例如：
- "我想看支付流程转化率"
- "我想知道按钮点击数据"
- "我想分析页面访问趋势"
- "我想对比各步骤的成功失败情况"

### 3. 智能分析
点击"智能分析"按钮，系统会：
- 解析您的需求
- 显示AI理解结果
- 自动生成对应图表

### 4. 图表操作
- **重新生成**：基于当前需求重新生成图表
- **导出图表**：将图表导出为PNG图片
- **保存配置**：保存当前分析配置

### 5. 项目配置管理（新增）
访问 `/project-config` 页面可以：
- 查看和管理团队列表
- 获取项目下的所有埋点配置
- 搜索和选择特定点位
- 查看统计信息

## 🔧 配置说明

### API配置
系统预设了以下配置：
- **项目ID**：event1021
- **埋点ID**：110
- **基础URL**：https://probe.yeepay.com
- **访问令牌**：已预设JWT token

### API端点配置（新增）
系统支持以下API端点：
- **获取团队列表**：`/wfManage/getSimpleTeamList`
- **获取项目点位**：`/tracker/buryPointWarehouse/getProjectAndWeList`
- **搜索埋点数据**：`/tracker/buryPointTest/search`

### 需求理解映射
系统支持以下关键词识别：
- **转化分析**：转化、漏斗、流程、步骤、转化率
- **趋势分析**：趋势、变化、时间、历史、走势
- **对比分析**：对比、比较、差异、排名
- **分布分析**：分布、占比、比例、构成
- **概览分析**：总体、概览、汇总、统计
- **成功失败分析**：成功、失败、通过、错误率

## 📁 项目结构

```
src/
├── api/                 # API接口
│   └── index.js        # API配置和请求方法
├── components/         # 组件
│   ├── ChartSection.vue           # 图表展示组件
│   ├── ConfigModal.vue            # 配置弹窗组件
│   ├── PageSelectionModal.vue     # 页面选择组件
│   ├── RequirementSection.vue     # 需求描述组件
│   ├── StatusBar.vue              # 状态栏组件
│   └── ProjectConfigPanel.vue     # 项目配置管理面板（新增）
├── composables/        # 可组合函数
│   ├── useChart.js                # 图表逻辑
│   ├── useDataFetch.js            # 数据获取逻辑
│   └── useProjectConfig.js        # 项目配置管理（新增）
├── config/            # 配置文件
│   └── api.js         # API配置和需求映射
├── router/            # 路由配置
│   └── index.js       # 路由定义
├── store/             # 状态管理
│   └── index.js       # Vuex store
├── utils/             # 工具类
│   ├── chartGenerator.js          # 图表生成器
│   ├── ollamaService.js           # AI服务
│   └── requirementParser.js       # 需求理解引擎
├── views/             # 页面
│   ├── Home.vue                   # 主页面
│   └── ProjectConfigTest.vue      # 项目配置测试页面（新增）
├── App.vue            # 根组件
└── main.js            # 入口文件
```

## 🎨 界面预览

### 系统状态栏
显示数据源连接状态、配置加载状态、当前日期等信息

### 需求描述区域
- 大文本框支持多行输入
- 字符计数显示
- 智能分析按钮

### AI理解结果
显示系统对需求的理解结果，包括：
- 理解意图
- 涉及页面/按钮/流程
- 推荐图表类型
- 置信度

### 图表展示区域
- 动态图表渲染
- 图表操作按钮
- 响应式布局

## 🔮 未来规划

### 短期目标（1-3个月）
- [ ] 完善需求理解引擎
- [ ] 增加更多图表类型
- [ ] 优化用户界面体验
- [ ] 添加数据导出功能

### 中期目标（3-6个月）
- [ ] 支持更复杂的自然语言
- [ ] 集成机器学习模型
- [ ] 添加智能推荐功能
- [ ] 支持多数据源

### 长期目标（6-12个月）
- [ ] 支持语音输入
- [ ] 自动异常检测
- [ ] 智能报告生成
- [ ] 移动端适配

## 📄 许可证

MIT License

## 👥 贡献

欢迎提交Issue和Pull Request来帮助改进项目。

---

## 📚 更多文档

- [API使用示例](doc/API使用示例.md) - 详细的API接口使用说明
- [更新日志](CHANGELOG.md) - 查看最新的功能更新

---

**开发团队**：易宝支付产品团队  
**最后更新**：2025-10-11
